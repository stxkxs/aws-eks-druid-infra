{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:base"
  ],
  "schedule": [
    "before 6am on monday"
  ],
  "timezone": "UTC",
  "prConcurrentLimit": 5,
  "prHourlyLimit": 3,
  "packageRules": [
    {
      "description": "Docker images",
      "matchDatasources": ["docker"],
      "matchPackageNames": ["apache/druid"],
      "schedule": ["before 6am on monday"]
    },
    {
      "description": "AWS VPC CNI",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: vpc-cni\\s+version: (?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+-eksbuild\\.[0-9]+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "aws/amazon-vpc-cni-k8s",
      "extractVersionTemplate": "^v(?<version>.*)$"
    },
    {
      "description": "AWS EBS CSI Driver",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: aws-ebs-csi-driver\\s+version: (?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+-eksbuild\\.[0-9]+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "kubernetes-sigs/aws-ebs-csi-driver",
      "extractVersionTemplate": "^v(?<version>.*)$"
    },
    {
      "description": "Kube Proxy",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: kube-proxy\\s+version: (?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+-eksbuild\\.[0-9]+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "kubernetes/kubernetes",
      "extractVersionTemplate": "^v(?<version>.*)$"
    },
    {
      "description": "CoreDNS",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: coredns\\s+version: (?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+-eksbuild\\.[0-9]+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "coredns/coredns",
      "extractVersionTemplate": "^v(?<version>.*)$"
    },
    {
      "description": "EKS Pod Identity Agent",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: eks-pod-identity-agent\\s+version: (?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+-eksbuild\\.[0-9]+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "aws/amazon-eks-pod-identity-webhook",
      "extractVersionTemplate": "^v(?<version>.*)$"
    },
    {
      "description": "CloudWatch Observability",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: amazon-cloudwatch-observability\\s+version: (?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+-eksbuild\\.[0-9]+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "aws/amazon-cloudwatch-agent",
      "extractVersionTemplate": "^v(?<version>.*)$"
    },
    {
      "description": "cert-manager Helm chart",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: cert-manager\\s+repository: https://charts\\.jetstack\\.io\\s+release: cert-manager\\s+version: (?<currentValue>v[0-9]+\\.[0-9]+\\.[0-9]+)"
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://charts.jetstack.io",
      "depNameTemplate": "cert-manager"
    },
    {
      "description": "CSI Secrets Store Driver Helm chart",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: secrets-store-csi-driver\\s+repository: https://kubernetes-sigs\\.github\\.io/secrets-store-csi-driver/charts\\s+release: csi-secrets\\s+version: (?<currentValue>[0-9]+\\.[0-9]+\\.[0-9]+)"
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://kubernetes-sigs.github.io/secrets-store-csi-driver/charts",
      "depNameTemplate": "secrets-store-csi-driver"
    },
    {
      "description": "AWS Secrets Store Provider Helm chart",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: secrets-store-csi-driver-provider-aws\\s+repository: https://aws\\.github\\.io/secrets-store-csi-driver-provider-aws\\s+release: aws-secrets\\s+version: (?<currentValue>[0-9]+\\.[0-9]+\\.[0-9]+)"
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://aws.github.io/secrets-store-csi-driver-provider-aws",
      "depNameTemplate": "secrets-store-csi-driver-provider-aws"
    },
    {
      "description": "Karpenter Helm chart",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: karpenter\\s+repository: oci://public\\.ecr\\.aws/karpenter/karpenter\\s+release: karpenter\\s+version: (?<currentValue>[0-9]+\\.[0-9]+\\.[0-9]+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "aws/karpenter-provider-aws",
      "extractVersionTemplate": "^v(?<version>.*)$"
    },
    {
      "description": "AWS Load Balancer Controller Helm chart",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: aws-load-balancer-controller\\s+repository: https://aws\\.github\\.io/eks-charts\\s+release: aws-load-balancer-controller\\s+version: (?<currentValue>[0-9]+\\.[0-9]+\\.[0-9]+)"
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://aws.github.io/eks-charts",
      "depNameTemplate": "aws-load-balancer-controller"
    },
    {
      "description": "Grafana k8s-monitoring Helm chart",
      "matchFileNames": ["**/eks/addons.mustache"],
      "matchStrings": [
        "name: k8s-monitoring\\s+repository: https://grafana\\.github\\.io/helm-charts\\s+release: k8s-monitoring\\s+version: (?<currentValue>[0-9]+\\.[0-9]+\\.[0-9]+)"
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://grafana.github.io/helm-charts",
      "depNameTemplate": "k8s-monitoring"
    }
  ]
}